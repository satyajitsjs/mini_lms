{% extends "dashboard_base.html" %}
{% load widget_tweaks %}
{% load static %}
{% block content %}
<link href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
<script src="//netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>
<script src="//code.jquery.com/jquery-1.11.1.min.js"></script>

<style>
    .form-check {
        display: flex;
        align-items: center;
        margin-bottom: 10px;
    }
    .form-check-input {
        margin-right: 10px;
    }
    .form-check-label {
        margin-left: 10px;
    }
</style>

<div class="jumbotron my-4">
    <form class="form" autocomplete="off" onsubmit="return saveAns()" action="/student/calculate-marks" method="POST">
        {% csrf_token %} <!-- Include CSRF token here -->
        <h1 style="text-align: center;">{{ course.name }}</h1>
        {% for q in quiz %}
        <h3 class="text-info">{{ forloop.counter }}. {{ q.question }}</h3>
        <h4 style="text-align: right;">[Marks {{ q.mark }}]</h4>

        <div class="form-check mx-4">
            <input class="form-check-input" type="radio" name="{{ forloop.counter }}" id="{{ q.option_a }}" value="Option_a">
            <label class="form-check-label" for="{{ q.option_a }}">{{ q.option_a }}</label>
        </div>

        <div class="form-check mx-4">
            <input class="form-check-input" type="radio" name="{{ forloop.counter }}" id="{{ q.option_b }}" value="Option_b">
            <label class="form-check-label" for="{{ q.option_b }}">{{ q.option_b }}</label>
        </div>

        <div class="form-check mx-4">
            <input class="form-check-input" type="radio" name="{{ forloop.counter }}" id="{{ q.option_c }}" value="Option_c">
            <label class="form-check-label" for="{{ q.option_c }}">{{ q.option_c }}</label>
        </div>

        <div class="form-check mx-4">
            <input class="form-check-input" type="radio" name="{{ forloop.counter }}" id="{{ q.option_d }}" value="Option_d">
            <label class="form-check-label" for="{{ q.option_d }}">{{ q.option_d }}</label>
        </div>
        {% endfor %}
        <input class="btn btn-info btn-lg" type="submit" value="Submit">
    </form>
</div>

<script>
    function saveAns() {
        var ele = document.getElementsByTagName('input');
        for (i = 0; i < ele.length; i++) {
            if (ele[i].type === "radio") {
                if (ele[i].checked) {
                    setCookie(ele[i].name, ele[i].value, 3)
                }
            }
        }
    }

    function setCookie(cname, cvalue, exdays) {
        var d = new Date();
        d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));
        var expires = "expires=" + d.toUTCString();
        document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
    }
</script>

{% endblock content %}